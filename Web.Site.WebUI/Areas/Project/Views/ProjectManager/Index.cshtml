@{
    ViewBag.Title = "项目管理";
}


<div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header"><h4>项目列表</h4></div>
            <div class="card-toolbar clearfix">
                <form class="pull-left search-bar" method="post" action="#!" role="form">
                    <div class="form-group">
                        <label for="example-input-normal">项目名称</label>
                        <input class="form-control" type="text" id="projectName" placeholder="项目名称..">
                    </div>
                </form>
                <div class="toolbar-btn-action" style="float:right">
                    <a class="btn btn-success m-r-5" href="#!" onclick=""><i class="mdi mdi-magnify"></i> 查询</a>
                    <a class="btn btn-primary m-r-5" href="#!" onclick=""><i class="mdi mdi-plus"></i> 新增</a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">

                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>编号</th>
                                <th>项目名称</th>
                                <th>项目负责人</th>
                                <th>项目内容</th>
                                <th>项目联系人</th>
                                <th>联系电话</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <ul class="pagination">
                    <li class="disabled"><span>«</span></li>
                    <li class="active"><span>1</span></li>
                    <li><a href="#1">2</a></li>
                    <li><a href="#1">3</a></li>
                    <li><a href="#1">4</a></li>
                    <li><a href="#1">5</a></li>
                    <li><a href="#1">6</a></li>
                    <li><a href="#1">7</a></li>
                    <li><a href="#1">8</a></li>
                    <li class="disabled"><span>...</span></li>
                    <li><a href="#!">14452</a></li>
                    <li><a href="#!">14453</a></li>
                    <li><a href="#!">»</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<script src="~/Scripts/new/tablequery/projectmanager.js"></script>

<script type="text/javascript">
    var query = {};
    var actionUrl = "@Url.Action("ProjectList", "projectmanager", new { Area = "Project" })";
    var projectName = $("projectName").val();
    var aoColumns = [
        { "sName": "Id"},
        { "sName": "ProjectName" },
        { "sName": "LeaderName"},
        { "sName": "Content"},
        { "sName": "LinkPerson"},
        { "sName": "LinkPhoneNo"},
        {
            "sName": "Id",
            "fnRender": function (oObj) {
                var btnArray = '<a class="btn btn-xs btn -default" href="#!" title="编辑" onclick="Edit(' + oObj.aData[oObj.aData.length - 1] + ') data-toggle="tooltip"><i class="mdi mdi - pencil"></i></a>';
                btnArray += '<a class="btn btn-xs btn-default" href="#!" title="删除"  onclick="Delete(' + oObj.aData[oObj.aData.length - 1] + ') data-toggle="tooltip"><i class="mdi mdi-window-close"></i></a>';
                return btnArray;
            }
        }
    ];

    InitDatatables($(".table-bordered"), actionUrl, aoColumns);

    function Search(index) {
        if (index && index <= 0) {
            index = 1;
        }
        query['PageSize'] = index;
        if (projectName && projectName!='') {
            query['projectName'] = $("projectName").val();
        }
        SearchDataTables($(".table-bordered"), actionUrl, aoColumns, query);
    }
</script>